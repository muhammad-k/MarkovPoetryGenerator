package com.company;

import java.util.*;

public class Main {

        /*String corpus = "Thank you. Thank you very much. Hello, Dallas, it's great to be with you tonight. Thank you, and I am thrilled to be here deep in the heart of Texas, where we just opened a beautiful new Louie Vuitton plant. When I'm with the freedom-loving patriots of the Lone Star State I love it. There has never been a better time to be a proud Texan and there's never been a better time to be a proud American."
                    + "There never has, there never has. So I came from a small town, Alvarado, Texas, where we celebrated the incredible revival of American manufacturing and we opened up some beautiful places. I'll tell you this place is doing great and created in a very short period of time, an extra 1,000 jobs for Texas. Since my election, we've created 775,000 new jobs across the state, including 70,000 Texas manufacturing jobs, they said those jobs had disappeared, didn't they huh, hey man?"
                    + "Our country is once again living by two simple rules: Buy American and hire American. The economy is booming, our people are prospering, our country is thriving, and our nation is stronger than ever before, but the more America achieves the more hateful and enraged these crazy Democrats become. Crazy."
                    + "They're crazy. They're, crazy. At stake in this fight is the survival of American democracy itself and don't kid yourself, that's what they want. They are destroying this country, but we will never let it happen not even close. For three straight years, radical Democrats have been trying to overthrow the results of a great, great election, maybe, maybe the greatest election in the history of our country, and they want to impose an extreme agenda."
                    + "They cannot pass it and they cannot win it at the ballot box. They're not going to win. They're not and even going to -- they won't come close in 2020. They know it. They know it. They're not going to win it. They say, let's see, what's another idea? What's another idea? How do we win this election? [Inaudible] You know, I really don't believe anymore that they love our country."
                    + "It doesn't play well because it was perfect, so he made up a totally false conversation with the Ukrainian President and we caught him cold. Everybody knew it anyway. See? We did one thing, you always have to do the unexpected. They never thought I'd release the conversation with the Ukrainian President."
                    + "I want to get him before Congress and I want to see what he has to say. You know they say he has immunity. Why would you have immunity for outright fraud? Why do you have immunity? Why? He's a fraud. We're fighting a campaign against leftists, socialists, and globalists who want to return to reckless wars, open borders, rampant crime, and totally disastrous one-way trade deals."
                    + "We're changing that one around very quickly. They believe America is the world's piggy bank and that your tax dollars should subsidize the economy, military, and defense of every other nation in the world, but our own. It's not happening anymore. Our political opposition made its fortune selling out our nation and its citizens, and you know, that's what's been happening, and that's why 2016 was so important, and that's why 2020 -- I can never say it's more important, but you know, it's like the roots of a tree."
                    + "Can you believe it? I've been a politician for three years. I can't believe that. I never thought I'd be called a politician. I don't like it, but it is what it is, but we're finally, again, putting America first. The radical Democrats want to destroy America, as we know it. They want to indoctrinate our children and teach them that America is a sinful wicked nation."
                    + "You see that happening all the time and I know it from personal experience what they want to teach your kids, not good. They come home, mommy, daddy, this is what I learned, and you're going, oh no, don't tell me. Let's get them into another school fast. They want to disarm law-abiding citizens, they want to take your guns away and they want to win so far left judges to shred our Constitution."
                    + "It's not happening. They want to tear down symbols of faith and drive Christians and religious believers from the public square. They want to silence your voices on social media and they want the government to censor, muzzle and shut down conservative voices. You know that. If they didn't hate our country, they wouldn't be doing this to our country."
                    + "They wouldn't be doing it because they know better. They know better. As an example, we're building a great wall along the Southern border and it's going up rapidly, going up. And you know five years ago, almost every one of them wanted a wall. Until I came along, and I said, we're going to build a great walk because they could never get it done and then they stopped the funding."
                    + "They made it almost impossible. Few people would have been able to do what we did, but we got it from here, and we got it from there, and we got it from all over the place, and we're building that sucker right now, and it's having a tremendous effect already. Not easy. Highest level. Everything we said it would be. It's moving rapidly, although, the fake news back there, they don't want to talk about it. [Audience shouts \"Boo\"] They don't want to talk about it. Look at all those cameras, do you believe it? Look at all those red lights, don't worry, I won't say anything bad about your network."
                    + "Because a lot of times I get ready to do a number on these phony networks. And you know, you see those red lights go off, off, off, off. They don't want their viewers to see it. But that's OK. I'm not going to say it tonight, I'm going to say your legitimate media. I don't actually mean that. But you look at that, but look at all those cameras."
                    + "You know that's like the Academy Awards used to be because -- before it failed. Do you know why it failed? Do you know why it failed? Because they came after us. That's why it failed. It failed because they had stupid people saying horrible things about us, stupid, stupid people. They are stupid people and their ratings have dropped like a rocket and I love seeing it. I'm telling you."
                    + "Love it. But no matter how hard they try, they will fail, because the people of Texas and the people of America will never surrender our freedom to those people right there. We will stand strong for family, faith, God, and for our country. Last week, a very dumb Democrat candidate for President."
                    + "Nobody noticed it. I noticed it. The flairer, do you remember he was flailing all over the place? I said why is this guy hot? John Cornyn is going to win so easily, just like Ted Cruz won. He's going to win, no matter what happens, but John Cornyn is not talking about Bado anymore, because Bado in a few Short weeks, got rid of guns and got rid of religion.";
*/

        /*
            //Outputs all pairs in the string
            for(Map.Entry<String, List<String>> entry : corpusMap.entrySet()){
            System.out.println("KEY: " + entry.getKey());
            System.out.println("VALUE: " + entry.getValue() );
            System.out.println("----------------------------");
        }*/

        /*"Just a short time ago, I had the honor of presiding over the swearing-in of five new great American citizens. It was a beautiful ceremony and a moving reminder of our nation’s proud history of welcoming legal immigrants from all over the world into our national family.\n" +
                "\n" +
                "I told them that the beauty and majesty of citizenship is that it draws no distinctions of race, or class, or faith, or gender or background. All Americans, whether first generation or tenth generation, are bound together in love and loyalty, friendship and affection.\n" +
                "\n" +
                "We are all equal. We are one team, and one people, proudly saluting one great American flag. We believe in a safe and lawful system of immigration, one that upholds our laws, our traditions, and our most cherished values.\n" +
                "\n" +
                "Unfortunately, our immigration system has been badly broken for a very long time. Over the decades, many Presidents and many lawmakers have come and gone, and no real progress has been made on immigration.\n" +
                "\n" +
                "We are now living with the consequences—and they are tragic—brought about by decades of political stalemate, partisan gridlock, and national neglect.\n" +
                "\n" +
                "There is a humanitarian and security crisis on our southern border that requires urgent action. Thousands of children are being exploited by ruthless coyotes and vicious cartels and gangs. One in three women is sexually assaulted on the dangerous journey north. In fact, many loving mothers give their young daughters birth control pills for the long journey up to the United States because they know they may be raped or sexually accosted or assaulted. Nearly 50 migrants a day are being referred for urgent medical care.\n" +
                "\n" +
                "Vast quantities of lethal narcotics are flooding through our border and into our communities, including meth, cocaine, heroin, and fentanyl. Drugs kill 78,000 Americans a year and cost our society in excess of $700 billion. Heroin alone kills 300 Americans a week, 90 percent of which comes across our southern border. We can stop heroin.\n" +
                "\n" +
                "Illegal immigration reduces wages and strains public services. The lack of border control provides a gateway—and a very wide and open gateway—for criminals and gang members to enter the United States, including the criminal aliens who murdered a brave California police officer only a day after Christmas.\n" +
                "\n" +
                "I’ve gotten to know and love Angel moms, dads, and family who lost loved ones to people illegally in our country. I want this to end. It’s got to end now. These are not talking points. These are the heartbreaking realities that are hurting innocent, precious human beings every single day on both sides of the border.\n" +
                "\n" +
                "As a candidate for President, I promised I would fix this crisis, and I intend to keep that promise one way or the other. Our immigration system should be the subject of pride, not a source of shame, as it is all over the world. Our immigration system should be the envy of the world, not a symbol of disunity and dysfunction.\n" +
                "\n" +
                "The good news is, these problems can all be solved but only if we have the political courage to do what is just and what is right.\n" +
                "\n" +
                "Both sides in Washington must simply come together, listen to each other, put down their armor, build trust, reach across the aisle, and find solutions.\n" +
                "\n" +
                "It is time to reclaim our future from the extreme voices who fear compromise and demand open borders, which means drugs pouring in, human trafficking, and a lot of crime.\n" +
                "\n" +
                "That is why I am here today, to break the logjam and provide Congress with a path forward to end the government shutdown and solve the crisis on the southern border. If we are successful in this effort, we will then have the best chance in a very long time at real, bipartisan immigration reform. And it won’t stop here. It will keep going until we do it all.\n" +
                "\n" +
                "The proposal I will outline today is based on, first and foremost, on input from our border agents and homeland security professionals—and professionals they are. They know what they’re doing. It is a compassionate response to the ongoing tragedy on our southern border.\n" +
                "\n" +
                "In recent weeks, we have met with large numbers of Democrat lawmakers to hear their ideas and suggestions. By incorporating the priorities of rank-and-file Democrats in our plan, we hope they will offer their enthusiastic support. And I think many will.\n" +
                "\n" +
                "This is a commonsense compromise both parties should embrace. The radical left can never control our borders. I will never let it happen. Walls are not immoral. In fact, they are the opposite of immoral because they will save many lives and stop drugs from pouring into our country.\n" +
                "\n" +
                "Our plan includes the following: $800 million in urgent humanitarian assistance; $805 million for drug detection technology to help secure our ports of entry; an additional 2,750 border agents and law enforcement professionals; 75 new immigration judge teams to reduce the court backlog of, believe it or not, almost 900,000 cases. However, the whole concept of having lengthy trials for anyone who sets one foot in our country unlawfully must be changed by Congress. It is unsustainable. It is ridiculous. Few places in the world would even consider such an impossible nightmare.\n" +
                "\n" +
                "Our plan includes critical measures to protect migrant children from exploitation and abuse. This includes a new system to allow Central American minors to apply for asylum in their home countries, and reform to promote family reunification for unaccompanied children, thousands of whom wind up on our border doorstep.\n" +
                "\n" +
                "To physically secure our border, the plan includes $5.7 billion for a strategic deployment of physical barriers, or a wall. This is not a 2,000-mile concrete structure from sea to sea. These are steel barriers in high-priority locations. Much of the border is already protected by natural barriers such as mountains and water. We already have many miles of barrier, including 115 miles that we are currently building or under contract.  It will be done quickly.  Our request will add another 230 miles this year in the areas our border agents most urgently need.  It will have an unbelievable impact.\n" +
                "\n" +
                "If we build a powerful and fully designed see-through steel barrier on our southern border, the crime rate and drug problem in our country would be quickly and greatly reduced.  Some say it could be cut in half.  Because these criminals, drug smugglers, gangs, and traffickers do not stop at our border; they permeate throughout our country and they end up in some places where you’d least expect them. They go all over our country. A steel barrier will help us stop illegal immigration while safely directing commerce to our lawful ports of entry.\n" +
                "\n" +
                "Many of these security ideas have been proposed by Democrats themselves, and all of them have been supported by Democrats in the past, including a physical barrier, wall, or fence.\n" +
                "\n" +
                "Furthermore, in order to build the trust and goodwill necessary to begin real immigration reform, there are two more elements to my plan.\n" +
                "\n" +
                "Number one is three years of legislative relief for 700,000 DACA recipients brought here unlawfully by their parents at a young age many years ago. This extension will give them access to work permits, Social Security numbers, and protection from deportation, most importantly.\n" +
                "\n" +
                "Secondly, our proposal provides a three-year extension of Temporary Protected Status, or TPS. This means that 300,000 immigrants whose protected status is facing expiration will now have three more years of certainty so that Congress can work on a larger immigration deal, which everybody wants—Republicans and Democrats. And our farmers and vineyards won’t be affected because lawful and regulated entry into our country will be easy and consistent.\n" +
                "\n" +
                "That is our plan: border security, DACA, TPS, and many other things. Straightforward, fair, reasonable, and common sense, with lots of compromise. Senate Majority Leader Mitch McConnell has pledged to bring this bill to a vote this week in the United States Senate.\n" +
                "\n" +
                "Our proposal is not intended to solve all of our immigration challenges. This plan solves the immediate crisis—and it is a horrible crisis. It is a humanitarian crisis like we rarely see in our country. And it provides humanitarian relief, delivers real border security, and immediately reopens our federal government.\n" +
                "\n" +
                "If we are successful in this effort, then we can start the border [broader] project of remaking our immigration system for the 21st century. Once the government is open and we have made a down payment on border security, and immigration reform starts to happen, I plan to convene weekly bipartisan meetings at the White House so we can do a finished product, a great product—a product that we can all be proud of, having to do with that elusive immigration problem.\n" +
                "\n" +
                "Whatever we do, I can promise you this: I will never forget that my first duty, and ultimate loyalty, is to you, the American people. Any reforms we make to our immigration system will be designed to improve your lives, make your communities safer, and make our nation more prosperous and secure for generations to come.\n" +
                "\n" +
                "Thank you and God bless America.  Thank you.";*/

    public static void main(String[] args) {

        String corpus = "";

        Map<String,List<String>> corpusMap = (loadMap(sanitizeCorpus(corpus)));

        System.out.println(writeLines(corpusMap, 1, 35));

    }

    private static String[] sanitizeCorpus(String corpus){

        //Takes corpus, turns it lowercase, removes punctuation and then replaces the line break with a ""
        corpus = corpus.toLowerCase().replaceAll("\\p{Punct}","").replaceAll("\n", " ");

        //Turning the entire string into single word arrays for easier traversal
        String[] corpusArray = corpus.split(" ");

        return corpusArray;
    }

    private static Map loadMap(String[]  corpusArray){

        //This is what holds all the values, a map where each key is a unique word
        //I used a set because we do not want the following words to repeat
        //NEW UPDATE: Keeping the set, using a list
        Map<String,List<String>> songMap = new HashMap<>();

        for(int i = 0; i < corpusArray.length-1; i++){

            //Here we check if the key is contained within the map,
            //if it is we add the value to the set
            //Second part is to make sure we do not include duplicate values in the arraylist
            if(songMap.containsKey(corpusArray[i]) &&
                !(songMap.get(corpusArray[i]).contains(corpusArray[i+1])))
                songMap.get(corpusArray[i]).add(corpusArray[i + 1]);
            else{
                List<String> valList = new ArrayList<>();
                valList.add(corpusArray[i+1]);
                songMap.put(corpusArray[i],valList);
            }

        }

        return songMap;
    }

    //Returns a random key from the corpusMap
    private static String randomKey(Map corpusPairs){

        List<String> keysAsArray = new ArrayList<>(corpusPairs.keySet());

        return keysAsArray.get((int)((keysAsArray.size() * Math.random())));
    }

    private static String writeLine(Map<String, List<String>> corpusPairs, int length){

        String line = "";
        int i = 0;
        String nextKey = randomKey(corpusPairs);

        while(i < length){

            //Here we check if the size of the arraylist is 1
            if(corpusPairs.get(nextKey).size() == 1){
                //If it is then we just take that element
                //add it to to the line and make it the next key
                line += corpusPairs.get(nextKey).get(0) + " ";
                nextKey = corpusPairs.get(nextKey).get(0);
                i++;
            }
            //If the size of the key's arraylist is > 1
            else{
                int randNum = (int)((corpusPairs.get(nextKey).size() * Math.random()));
                line += corpusPairs.get(nextKey).get(randNum) + " ";
                nextKey = corpusPairs.get(nextKey).get(randNum);
                i++;
            }
        }

        return line;
    }

    private static String writeLines(Map<String, List<String>> corpusPairs, int numOfLines, int numOfWordsPerLine){

        String lines = "";

        for(int i = 0; i < numOfLines; i++){
            lines += writeLine(corpusPairs, numOfWordsPerLine);
            lines += "\n";
        }
        return lines;
    }
}
